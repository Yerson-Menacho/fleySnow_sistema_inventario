{% extends 'base.html' %}

{% block title %}Listado de Insumos{% endblock %}

{% block content %}
<div class="container">
    <h2>Lista de Insumos</h2>
    <div class="header-row d-flex justify-content-between align-items-center mb-3">
        <!-- ğŸ”¹ Acciones rÃ¡pidas -->
        <div class="acciones" style="margin-bottom: 15px;">
            {% if tiene_permiso('insumos.crear') %}
                <a href="{{ url_for('insumos.nuevo_insumo') }}" class="btn btn-primary">â• Nuevo insumo</a>
            {% endif %}
            {% if tiene_permiso('categoria.ver') %}
                <a href="{{ url_for('categorias.index') }}" class="btn btn-secondary">âš™ï¸ CategorÃ­as</a>
            {% endif %}
            {% if tiene_permiso('variedad.ver') %}
                <a href="{{ url_for('variedades.index') }}" class="btn btn-secondary">ğŸŒ± Variedades</a>
            {% endif %}        
            
        </div>
        <!-- Lado izquierdo: Reporte -->
        <div class="form-row-busqueda">
            <!-- Buscador rÃ¡pido -->
            <div class="form-group">
                <label for="buscarInsumo">Buscar (nombre o cÃ³digo)</label>
                <input type="text" id="buscarInsumo" class="form-control" placeholder="Ingrese nombre o cÃ³digo...">
            </div>
            <div class="form-group">
                {% if tiene_permiso('insumos.ver') %}
                    <a href="{{ url_for('reportes.vista_reporte_insumos') }}" class="btn btn-secondary me-2">ğŸ“Š Ver Reporte
                    </a>
                {% endif %}
                {% if tiene_permiso('stock.ver') %}
                        <a href="{{ url_for('reportes.stock_bajo') }}" class="btn btn-secondary me-2">âš ï¸ Stock Bajo</a>
                   
                {% endif %}
            </div>
        </div>
    </div>

    

    <table cellpadding="8" cellspacing="0">
        <thead>
            <tr>
                <th>ID</th>
                <th>CÃ³digo</th>
                <th>Nombre</th>
                <th>Stock</th>
                <th>Unidad</th>
                <th>Ingreso</th>
                <th>Vencimiento</th>
                <th>Estado</th>
                <th>Acciones</th>
            </tr>
        </thead>
        <tbody id="tablaInsumosBody">
            {% include 'insumos/_tabla_insumos.html' %}
        </tbody>
    </table>

    <!-- URL generada en servidor para usar en JS -->
    <script src="{{ url_for('static', filename='js/insumos_list.js') }}"></script>

{% endblock %}